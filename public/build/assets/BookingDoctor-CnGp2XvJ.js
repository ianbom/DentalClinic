import{r as h,j as e,L as u}from"./app-t53NlGWA.js";import{u as g,B as w}from"./BookingContext-9i3tla04.js";import{B as v}from"./BookingHeader-DlFCZWzL.js";import{P as k}from"./PatientLayout-DBNYWnVE.js";import"./Navbar-C7aHu4Z_.js";const D=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],S=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];function _(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function M(t){return new Date(t.getFullYear(),t.getMonth(),1).getDay()}function B(t,a,i){const r=String(a).padStart(2,"0"),c=String(i).padStart(2,"0");return`${t}-${r}-${c}`}function T(t){const a=new Date;a.setHours(0,0,0,0);const i=new Date(t);return i.setHours(0,0,0,0),i<a}function P({availableSlots:t}){const{bookingData:a,setBookingData:i}=g(),[r,c]=h.useState(new Date),l=_(r),d=M(r),p=()=>{c(new Date(r.getFullYear(),r.getMonth()-1,1))},f=()=>{c(new Date(r.getFullYear(),r.getMonth()+1,1))},m=s=>B(r.getFullYear(),r.getMonth()+1,s),b=s=>{const n=m(s),o=t[n];o&&i({selectedDate:o.formatted_date,selectedTime:""})},j=s=>{const n=m(s);return t[n]?.slots.some(x=>x.available)??!1},y=s=>{const n=m(s),o=t[n];return a.selectedDate===o?.formatted_date},N=s=>{const n=new Date(r.getFullYear(),r.getMonth(),s);return T(n)};return e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-2",children:[e.jsx("button",{onClick:p,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-base font-bold text-text-light",children:[D[r.getMonth()]," ",r.getFullYear()]}),e.jsx("button",{onClick:f,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward_ios"})})]}),e.jsx("div",{className:"mb-2 grid grid-cols-7",children:S.map((s,n)=>e.jsx("div",{className:"py-2 text-center text-xs font-bold uppercase tracking-wide text-gray-400",children:s},n))}),e.jsxs("div",{className:"grid grid-cols-7 gap-x-1 gap-y-2",children:[Array.from({length:d}).map((s,n)=>e.jsx("div",{className:"h-10 w-full"},`empty-${n}`)),Array.from({length:l},(s,n)=>n+1).map(s=>{const n=N(s),o=j(s),x=y(s);return n||!o?e.jsx("button",{className:"mx-auto flex h-10 w-10 cursor-not-allowed items-center justify-center rounded-full text-sm font-medium text-gray-300",disabled:!0,children:s},s):x?e.jsx("button",{className:"mx-auto flex h-10 w-10 scale-110 transform items-center justify-center rounded-full bg-primary text-sm font-bold text-white shadow-md shadow-primary/30",children:s},s):e.jsx("button",{onClick:()=>b(s),className:"mx-auto flex h-10 w-10 cursor-pointer items-center justify-center rounded-full text-sm font-medium text-text-light transition-colors hover:bg-gray-100",children:s},s)})]})]})}function F({doctorId:t,doctor:a}){const{bookingData:i}=g();return e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-gray-100 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-gray-100 bg-gray-50/50 p-5",children:e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ringkasan Booking"})}),e.jsxs("div",{className:"flex flex-col gap-6 p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative size-14 shrink-0 overflow-hidden rounded-full bg-gray-200",children:e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:`url("${a?.profile_pic||"/img/default-doctor.png"}")`}})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"mb-0.5 text-xs font-medium uppercase tracking-wider text-gray-500",children:"Dokter Gigi"}),e.jsx("p",{className:"font-bold text-text-light",children:a?.name||"Loading..."})]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Waktu Konsultasi"}),e.jsxs("div",{className:"flex items-center gap-2 text-text-light",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary",children:"calendar_today"}),e.jsx("p",{className:"font-medium",children:i.selectedDate||"Pilih tanggal"})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-text-light",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary",children:"schedule"}),e.jsx("p",{className:"font-medium",children:i.selectedTime||"Pilih waktu"})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 p-5 pt-2",children:[e.jsxs(u,{href:`/doctors/${t}`,className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 px-4 py-3 font-semibold text-gray-700 transition-colors hover:bg-gray-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back"}),e.jsx("span",{children:"Kembali"})]}),e.jsxs(u,{href:`/doctors/${t}/booking/patient-data`,className:`group flex w-full items-center justify-center gap-2 rounded-lg px-4 py-3.5 font-bold shadow-md transition-colors ${i.selectedDate&&i.selectedTime?"cursor-pointer bg-primary text-white shadow-primary/20 hover:bg-primary-dark":"pointer-events-none cursor-not-allowed bg-gray-200 text-gray-400"}`,children:[e.jsx("span",{children:"Lanjut ke Data Customer"}),e.jsx("span",{className:"material-symbols-outlined text-[18px] transition-transform group-hover:translate-x-1",children:"arrow_forward"})]})]})]})}function $({availableSlots:t}){const{bookingData:a,setBookingData:i}=g(),r=h.useMemo(()=>a.selectedDate?Object.values(t).find(d=>d.formatted_date===a.selectedDate)?.slots??[]:[],[t,a.selectedDate]),c=l=>{i({selectedTime:`${l} WIB`})};return a.selectedDate?r.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"event_busy"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada jadwal tersedia untuk tanggal ini"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ketersediaan Waktu"}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full border border-gray-300 bg-white"}),e.jsx("span",{className:"text-gray-500",children:"Tersedia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-gray-500",children:"Dipilih"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-gray-200"}),e.jsx("span",{className:"text-gray-500",children:"Penuh"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4",children:r.map(l=>{const d=a.selectedTime===`${l.time} WIB`;return l.available?d?e.jsx("button",{className:"rounded-lg border-2 border-primary bg-primary/10 px-4 py-2.5 text-sm font-bold text-primary shadow-sm ring-1 ring-primary/20",children:l.time},l.time):e.jsx("button",{onClick:()=>c(l.time),className:"cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-all hover:border-primary hover:text-primary",children:l.time},l.time):e.jsx("button",{className:"cursor-not-allowed rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-400 line-through",disabled:!0,title:l.reason==="booked"?"Sudah dibooking":l.reason==="time_off"?"Dokter tidak tersedia":"Tidak tersedia",children:l.time},l.time)})})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"calendar_month"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih tanggal terlebih dahulu"})]})}function A({doctor:t,availableSlots:a}){return e.jsx("div",{className:"flex min-h-screen flex-1 flex-col items-center bg-background-light px-4 py-8 font-display md:px-10 lg:px-20",children:e.jsxs("div",{className:"flex w-full max-w-6xl flex-col gap-8",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex flex-col items-start gap-8 lg:flex-row",children:[e.jsxs("div",{className:"w-full flex-1 rounded-xl border border-gray-100 bg-white p-6 shadow-sm md:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2 text-lg font-bold text-text-light",children:"Pilih Tanggal"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Silakan pilih tanggal yang tersedia untuk konsultasi Anda."})]}),e.jsx(P,{availableSlots:a}),e.jsx("div",{className:"border-t border-gray-100 pt-8",children:e.jsx($,{availableSlots:a})})]}),e.jsx("div",{className:"sticky top-28 w-full shrink-0 lg:w-[360px]",children:e.jsx(F,{doctorId:String(t.id),doctor:t})})]})]})})}A.layout=t=>e.jsx(k,{children:e.jsx(w,{children:t})});export{A as default};
