import{r as b,j as e}from"./app-Ddfl5t9z.js";import{u as h}from"./BookingContext-DxnQIfP0.js";const D=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],v=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];function k(n){return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()}function w(n){return new Date(n.getFullYear(),n.getMonth(),1).getDay()}function N(n,a,o){const r=String(a).padStart(2,"0"),c=String(o).padStart(2,"0");return`${n}-${r}-${c}`}function S(n){const a=new Date;a.setHours(0,0,0,0);const o=new Date(n);return o.setHours(0,0,0,0),o<a}function T({availableSlots:n}){const{bookingData:a,setBookingData:o}=h(),[r,c]=b.useState(new Date),m=k(r),d=w(r),t=()=>{c(new Date(r.getFullYear(),r.getMonth()-1,1))},i=()=>{c(new Date(r.getFullYear(),r.getMonth()+1,1))},u=s=>N(r.getFullYear(),r.getMonth()+1,s),p=s=>{const l=u(s),g=n[l];g&&o({selectedDate:g.formatted_date,rawSelectedDate:l,selectedTime:""})},f=s=>{const l=u(s);return n[l]?.slots.some(x=>x.available)??!1},j=s=>{const l=u(s),g=n[l];return a.selectedDate===g?.formatted_date},y=s=>{const l=new Date(r.getFullYear(),r.getMonth(),s);return S(l)};return e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-2",children:[e.jsx("button",{onClick:t,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-base font-bold text-text-light",children:[D[r.getMonth()]," ",r.getFullYear()]}),e.jsx("button",{onClick:i,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward_ios"})})]}),e.jsx("div",{className:"mb-2 grid grid-cols-7",children:v.map((s,l)=>e.jsx("div",{className:"py-2 text-center text-xs font-bold uppercase tracking-wide text-gray-400",children:s},l))}),e.jsxs("div",{className:"grid grid-cols-7 gap-x-1 gap-y-2",children:[Array.from({length:d}).map((s,l)=>e.jsx("div",{className:"h-10 w-full"},`empty-${l}`)),Array.from({length:m},(s,l)=>l+1).map(s=>{const l=y(s),g=f(s),x=j(s);return l||!g?e.jsx("button",{className:"mx-auto flex h-10 w-10 cursor-not-allowed items-center justify-center rounded-full text-sm font-medium text-gray-300",disabled:!0,children:s},s):x?e.jsx("button",{className:"mx-auto flex h-10 w-10 scale-110 transform items-center justify-center rounded-full bg-primary text-sm font-bold text-white shadow-md shadow-primary/30",children:s},s):e.jsx("button",{onClick:()=>p(s),className:"mx-auto flex h-10 w-10 cursor-pointer items-center justify-center rounded-full text-sm font-medium text-text-light transition-colors hover:bg-gray-100",children:s},s)})]})]})}function P({availableSlots:n}){const{bookingData:a,setBookingData:o}=h(),r=b.useMemo(()=>!a.rawSelectedDate&&!a.selectedDate?[]:a.rawSelectedDate&&n[a.rawSelectedDate]?n[a.rawSelectedDate].slots??[]:Object.values(n).find(i=>i.formatted_date===a.selectedDate)?.slots??[],[n,a.rawSelectedDate,a.selectedDate]),c=t=>a.serviceType==="short"?t.available_for_short??t.available:a.serviceType==="long"?t.available_for_long??t.available:t.available,m=a.serviceType==="short"&&r.length>0&&!r.some(t=>c(t)),d=t=>{a.selectedTime===t?o({selectedTime:""}):o({selectedTime:t})};return a.serviceType?a.selectedDate?r.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"event_busy"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada jadwal tersedia untuk tanggal ini"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ketersediaan Waktu"}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full border border-gray-300 bg-white"}),e.jsx("span",{className:"text-gray-500",children:"Tersedia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-gray-500",children:"Dipilih"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-gray-200"}),e.jsx("span",{className:"text-gray-500",children:"Penuh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4",children:[r.map(t=>{const i=a.selectedTime===t.time;return c(t)?i?e.jsxs("button",{className:"rounded-lg border-2 border-primary bg-primary/10 px-4 py-2.5 text-sm font-bold text-primary shadow-sm ring-1 ring-primary/20",children:[t.time," WIB"]},t.time):e.jsxs("button",{onClick:()=>d(t.time),className:"cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-all hover:border-primary hover:text-primary",children:[t.time," WIB"]},t.time):e.jsxs("button",{className:"cursor-not-allowed rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-400 line-through",disabled:!0,title:t.reason==="booked"?"Sudah dibooking":t.reason==="time_off"?"Dokter tidak tersedia":"Tidak tersedia",children:[t.time," WIB"]},t.time)}),m&&e.jsxs("button",{onClick:()=>d("Dijadwalkan Admin"),className:`flex flex-col items-center justify-center gap-1 rounded-lg border px-2 py-2.5 text-center text-xs font-medium transition-all sm:text-sm ${a.selectedTime==="Dijadwalkan Admin"?"border-primary bg-primary/10 text-primary shadow-sm ring-1 ring-primary/20":"border-amber-200 bg-amber-50 text-amber-900 hover:border-amber-300 hover:bg-amber-100"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"support_agent"}),e.jsx("span",{children:"Dijadwalkan Admin"})]})]})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"calendar_month"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih tanggal terlebih dahulu"})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-amber-400",children:"warning"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih jenis layanan terlebih dahulu"})]})}function A({value:n,onChange:a,showSisipan:o=!1}){const{setBookingData:r}=h(),c=m=>{const d=m.target.value;a(d);let t="",i="";switch(d){case"konsultasi":t="Konsultasi/Periksa",i="short";break;case"cabut_gigi_anak":t="Cabut Gigi Anak",i="short";break;case"pengobatan":t="Sakit Gigi / Pengobatan",i="short";break;case"cabut_gigi_dewasa":t="Cabut Gigi Dewasa",i="long";break;case"scalling":t="Pembersihan Karang Gigi / Scalling",i="long";break;case"kontrol_gigi":t="Kontrol Gigi",i="long";break;case"tambal_gigi":t="Tambal Gigi",i="long";break;case"bleaching":t="Pemutihan Gigi / Bleaching",i="long";break;case"gigi_palsu":t="Pasang Gigi Palsu",i="long";break;case"pasang_diamond":t="Pasang Diamond",i="long";break;case"sisipan":t="Sisipan",i="sisipan";break;default:t="",i=""}r({service:t,serviceType:i,serviceId:d})};return e.jsxs("select",{value:n,onChange:c,className:"w-full rounded-lg border border-[#cee0e8] bg-white px-4 py-3 text-[#0d171c] focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",children:"-- Pilih Layanan --"}),e.jsx("option",{value:"konsultasi",children:"Konsultasi/Periksa "}),e.jsx("option",{value:"cabut_gigi_anak",children:"Cabut Gigi Anak "}),e.jsx("option",{value:"pengobatan",children:"Sakit Gigi / Pengobatan"}),e.jsx("option",{value:"cabut_gigi_dewasa",children:"Cabut Gigi Dewasa"}),e.jsx("option",{value:"scalling",children:"Pembersihan Karang Gigi / Scalling"}),e.jsx("option",{value:"kontrol_gigi",children:"Kontrol Gigi "}),e.jsx("option",{value:"tambal_gigi",children:"Tambal Gigi "}),e.jsx("option",{value:"bleaching",children:"Pemutihan Gigi / Bleaching"}),e.jsx("option",{value:"gigi_palsu",children:"Pasang Gigi Palsu "}),e.jsx("option",{value:"pasang_diamond",children:"Pasang Diamond "}),o&&e.jsx("option",{value:"sisipan",children:"ðŸ“‹ Sisipan"})]})}export{T as B,A as S,P as a};
