import{j as e,r as l,d as j}from"./app-DCvnCINP.js";import{S as D,B,a as T}from"./ServiceSelection-CTygiuJn.js";import{u as I,B as _}from"./BookingContext-Dwdd_TsP.js";import{A as C}from"./AdminLayout-SdcldndE.js";import"./AdminSidebar-DqlFiBoG.js";function P({booking:s,allDoctors:f,doctor:d,availableSlots:n,selectedDoctorId:u}){const{bookingData:t,setBookingData:x,resetBookingData:m}=I(),[i,N]=l.useState(u),[r,b]=l.useState(s.service),[o,h]=l.useState(!1),[p,g]=l.useState(!1);l.useEffect(()=>{p||(m(),setTimeout(()=>{x({service:"",serviceType:"",selectedDate:"",rawSelectedDate:"",selectedTime:"",fullName:"",nik:"",whatsapp:"",gender:"",birthdate:"",address:"",isWhatsappVerified:!1,isNikChecked:!1}),g(!0)},0))},[s,p,m,x]);const v=a=>{const c=a.target.value;N(Number(c)),c&&j.get(`/admin/bookings/${s.id}/reschedule`,{doctor_id:c},{preserveState:!1})},y=a=>{b(a)},w=()=>{!i||!t.rawSelectedDate||(h(!0),j.put(`/admin/bookings/${s.id}/reschedule`,{doctor_id:i,service:t.service,type:t.serviceType,booking_date:t.rawSelectedDate,start_time:t.selectedTime||null},{onFinish:()=>h(!1)}))},S=a=>({confirmed:"bg-green-100 text-green-700 border-green-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200",cancelled:"bg-red-100 text-red-700 border-red-200",completed:"bg-blue-100 text-blue-700 border-blue-200"})[a]||"bg-gray-100 text-gray-700 border-gray-200";return e.jsx("div",{className:"min-h-screen bg-[#f8fbfc] p-6",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#0d171c]",children:"Reschedule Booking"}),e.jsxs("p",{className:"text-sm text-[#49829c]",children:["Ubah jadwal booking #",s.code]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs("div",{className:"rounded-xl border border-[#e7f0f4] bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"flex size-8 items-center justify-center rounded-full bg-primary text-sm font-bold text-white",children:"1"}),e.jsx("h2",{className:"text-lg font-bold text-[#0d171c]",children:"Pilih Dokter"})]}),e.jsx("select",{value:i,onChange:v,className:"w-full rounded-lg border border-[#cee0e8] bg-white px-4 py-3 text-[#0d171c] focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:f.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),d&&e.jsxs("div",{className:"rounded-xl border border-[#e7f0f4] bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"flex size-8 items-center justify-center rounded-full bg-primary text-sm font-bold text-white",children:"2"}),e.jsx("h2",{className:"text-lg font-bold text-[#0d171c]",children:"Pilih Layanan"})]}),e.jsx(D,{value:r,onChange:y,showSisipan:!0})]}),d&&r&&e.jsxs("div",{className:"rounded-xl border border-[#e7f0f4] bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"flex size-8 items-center justify-center rounded-full bg-primary text-sm font-bold text-white",children:"3"}),e.jsx("h2",{className:"text-lg font-bold text-[#0d171c]",children:"Pilih Tanggal & Jam"})]}),e.jsx(B,{availableSlots:n}),e.jsx("div",{className:"mt-6 border-t border-[#e7f0f4] pt-6",children:e.jsx(T,{availableSlots:n})}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[t.selectedDate&&e.jsxs("div",{className:"rounded-lg bg-green-50 px-3 py-2 text-green-700",children:["ðŸ“… Tanggal:"," ",t.selectedDate]}),t.selectedTime&&e.jsxs("div",{className:"rounded-lg bg-blue-50 px-3 py-2 text-blue-700",children:["â° Jam: ",t.selectedTime," ","WIB"]})]})]}),d&&r&&t.rawSelectedDate&&e.jsx("button",{onClick:w,disabled:o,className:"w-full rounded-lg bg-primary py-4 font-semibold text-white transition-colors hover:bg-primary-dark disabled:cursor-not-allowed disabled:opacity-50",children:o?"Menyimpan...":"Simpan Perubahan"})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-[#e7f0f4] bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[#0d171c]",children:"Booking Saat Ini"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Kode"}),e.jsx("span",{className:"font-mono font-medium text-[#0d171c]",children:s.code})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Status"}),e.jsx("span",{className:`rounded-full border px-2 py-0.5 text-xs font-semibold ${S(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Dokter"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:s.doctor.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Layanan"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:s.service})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Tanggal"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:s.booking_date_formatted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Jam"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:s.start_time?`${s.start_time} WIB`:"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Dibuat"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:s.created_at_formatted})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-[#e7f0f4] bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-[#0d171c]",children:"Data Pasien"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[#49829c]",children:"Nama"}),e.jsx("p",{className:"font-medium text-[#0d171c]",children:s.patient.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[#49829c]",children:"NIK"}),e.jsx("p",{className:"font-mono text-[#0d171c]",children:s.patient.nik})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[#49829c]",children:"Telepon"}),e.jsx("p",{className:"text-[#0d171c]",children:s.patient.phone})]}),s.patient.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[#49829c]",children:"Email"}),e.jsx("p",{className:"text-[#0d171c]",children:s.patient.email})]}),s.patient.address&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-[#49829c]",children:"Alamat"}),e.jsx("p",{className:"text-[#0d171c]",children:s.patient.address})]})]})]}),e.jsxs("div",{className:"rounded-xl border-2 border-primary/30 bg-primary/5 p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-primary",children:"Jadwal Baru"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Dokter"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:d?.name||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Layanan"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:t.service||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Tanggal"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:t.selectedDate||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#49829c]",children:"Jam"}),e.jsx("span",{className:"font-medium text-[#0d171c]",children:t.selectedTime?`${t.selectedTime} WIB`:"Belum dipilih"})]})]})]})]})})]})]})})}function k(s){return e.jsx(P,{...s})}k.layout=s=>e.jsx(C,{children:e.jsx(_,{children:s})});export{k as default};
