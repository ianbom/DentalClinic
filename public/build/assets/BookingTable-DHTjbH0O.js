import{r as f,j as e,L as y}from"./app-DCvnCINP.js";import{g,a as b}from"./index-BIydFD2V.js";function D({title:t,bookings:s,emptyMessage:a="Tidak ada booking ditemukan",showExpandable:l=!1,showActions:r=!1,currentPage:x=1,itemsPerPage:d=10,sortField:m="",sortOrder:p="asc",onSort:o,onPayment:h}){const[c,j]=f.useState(null),u=n=>{j(c===n?null:n)};return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[t&&e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t}),e.jsxs("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-sm font-medium text-primary",children:[s.length," booking"]})]}),s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-left",children:[e.jsx(v,{showActions:r,sortField:m,sortOrder:p,onSort:o}),e.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:s.map((n,N)=>e.jsx(_,{booking:n,rowNumber:(x-1)*d+N+1,showActions:r,showExpandable:l,isExpanded:c===n.id,onToggleExpand:()=>u(n.id),onPayment:h},n.id))})]})}):e.jsx(w,{message:a})]})}function i({label:t,field:s,currentField:a,currentOrder:l,onSort:r}){const x=a===s;return e.jsx("th",{className:"cursor-pointer px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500 transition-colors hover:text-slate-700",onClick:()=>r?.(s),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:x?l==="asc"?"arrow_upward":"arrow_downward":"unfold_more"})]})})}function v({showActions:t,sortField:s,sortOrder:a,onSort:l}){return e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-10 px-4 py-3 text-center text-xs font-semibold uppercase tracking-wider text-slate-500",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Kode"}),e.jsx(i,{label:"Pasien",field:"patient_name",currentField:s,currentOrder:a,onSort:l}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Dokter"}),e.jsx(i,{label:"Tanggal & Jam",field:"booking_date",currentField:s,currentOrder:a,onSort:l}),e.jsx(i,{label:"Dipesan pada",field:"created_at",currentField:s,currentOrder:a,onSort:l}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Pembayaran"}),t&&e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Aksi"})]})})}function w({message:t}){return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"event_busy"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:t})]})}function _({booking:t,rowNumber:s,showActions:a,showExpandable:l,isExpanded:r,onToggleExpand:x,onPayment:d}){return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"transition-colors hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3 text-center text-sm text-slate-500",children:s}),e.jsx("td",{className:"px-4 py-3 font-mono text-sm font-medium text-slate-900",children:t.code}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:t.patient_name}),e.jsx("p",{className:"text-xs text-slate-500",children:t.patient_phone})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:t.doctor_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-900",children:t.booking_date_formatted}),e.jsx("span",{className:"text-xs text-slate-500",children:t.start_time?`${t.start_time} WIB`:"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:t.created_at_formatted}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(S,{status:t.status})}),e.jsx("td",{className:"px-4 py-3",children:t.payment?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-medium text-green-700",children:["Rp"," ",t.payment.amount.toLocaleString("id-ID")]}),e.jsx("span",{className:"text-xs capitalize text-slate-500",children:t.payment.payment_method})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"Belum bayar"})}),a&&e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx("button",{onClick:x,className:"cursor-pointer rounded-md bg-slate-100 p-1.5 text-slate-600 transition-colors hover:bg-slate-200",title:"Detail",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:r?"expand_less":"expand_more"})}),d&&e.jsx("button",{onClick:()=>d(t),className:"cursor-pointer rounded-md bg-green-100 p-1.5 text-green-600 transition-colors hover:bg-green-200",title:"Input Pembayaran",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"payments"})}),e.jsx(y,{href:`/admin/bookings/${t.id}`,className:"cursor-pointer rounded-md bg-primary p-1.5 text-white transition-colors hover:bg-sky-600",title:"Lihat Detail",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility"})})]})})]}),l&&r&&e.jsx(B,{booking:t,showActions:a})]})}function B({booking:t,showActions:s}){return e.jsx("tr",{className:"bg-slate-50",children:e.jsx("td",{colSpan:s?8:7,className:"px-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"NIK"}),e.jsx("p",{className:"text-sm text-slate-900",children:t.patient_nik})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Service"}),e.jsx("p",{className:"text-sm text-slate-900",children:t.service||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Gender"}),e.jsx("p",{className:"text-sm text-slate-900",children:t.patient_gender||"-"})]})]})})})}function S({status:t}){return e.jsx("span",{className:`inline-flex rounded-full border px-3 py-1 text-xs font-semibold ${b(t)}`,children:g(t)})}export{D as B};
