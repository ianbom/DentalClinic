import{r as f,j as e,L as p}from"./app-BIRp2Rbv.js";import{u as m,B as v}from"./BookingContext-CM2TI5VD.js";import{B as w}from"./BookingHeader-Cy4WgxJO.js";import{P as k}from"./PatientLayout-sQP7mc_w.js";import"./Navbar-yH9ng6JF.js";const D=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],S=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];function _(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function M(t){return new Date(t.getFullYear(),t.getMonth(),1).getDay()}function T(t,r,l){const n=String(r).padStart(2,"0"),o=String(l).padStart(2,"0");return`${t}-${n}-${o}`}function P(t){const r=new Date;r.setHours(0,0,0,0);const l=new Date(t);return l.setHours(0,0,0,0),l<r}function B({availableSlots:t}){const{bookingData:r,setBookingData:l}=m(),[n,o]=f.useState(new Date),x=_(n),s=M(n),c=()=>{o(new Date(n.getFullYear(),n.getMonth()-1,1))},h=()=>{o(new Date(n.getFullYear(),n.getMonth()+1,1))},g=a=>T(n.getFullYear(),n.getMonth()+1,a),b=a=>{const i=g(a),d=t[i];d&&l({selectedDate:d.formatted_date,selectedTime:""})},y=a=>{const i=g(a);return t[i]?.slots.some(u=>u.available)??!1},j=a=>{const i=g(a),d=t[i];return r.selectedDate===d?.formatted_date},N=a=>{const i=new Date(n.getFullYear(),n.getMonth(),a);return P(i)};return e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-2",children:[e.jsx("button",{onClick:c,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-base font-bold text-text-light",children:[D[n.getMonth()]," ",n.getFullYear()]}),e.jsx("button",{onClick:h,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward_ios"})})]}),e.jsx("div",{className:"mb-2 grid grid-cols-7",children:S.map((a,i)=>e.jsx("div",{className:"py-2 text-center text-xs font-bold uppercase tracking-wide text-gray-400",children:a},i))}),e.jsxs("div",{className:"grid grid-cols-7 gap-x-1 gap-y-2",children:[Array.from({length:s}).map((a,i)=>e.jsx("div",{className:"h-10 w-full"},`empty-${i}`)),Array.from({length:x},(a,i)=>i+1).map(a=>{const i=N(a),d=y(a),u=j(a);return i||!d?e.jsx("button",{className:"mx-auto flex h-10 w-10 cursor-not-allowed items-center justify-center rounded-full text-sm font-medium text-gray-300",disabled:!0,children:a},a):u?e.jsx("button",{className:"mx-auto flex h-10 w-10 scale-110 transform items-center justify-center rounded-full bg-primary text-sm font-bold text-white shadow-md shadow-primary/30",children:a},a):e.jsx("button",{onClick:()=>b(a),className:"mx-auto flex h-10 w-10 cursor-pointer items-center justify-center rounded-full text-sm font-medium text-text-light transition-colors hover:bg-gray-100",children:a},a)})]})]})}function A({doctorId:t,doctor:r}){const{bookingData:l}=m();return e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border border-gray-100 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-gray-100 bg-gray-50/50 p-5",children:e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ringkasan Booking"})}),e.jsxs("div",{className:"flex flex-col gap-6 p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative size-14 shrink-0 overflow-hidden rounded-full bg-gray-200",children:e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:`url("${r?.profile_pic||"/img/default-doctor.png"}")`}})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"mb-0.5 text-xs font-medium uppercase tracking-wider text-gray-500",children:"Dokter Gigi"}),e.jsx("p",{className:"font-bold text-text-light",children:r?.name||"Loading..."})]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Waktu Konsultasi"}),e.jsxs("div",{className:"flex items-center gap-2 text-text-light",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary",children:"calendar_today"}),e.jsx("p",{className:"font-medium",children:l.selectedDate||"Pilih tanggal"})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-text-light",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary",children:"schedule"}),e.jsx("p",{className:"font-medium",children:l.selectedTime||"Pilih waktu"})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 p-5 pt-2",children:[e.jsxs(p,{href:`/doctors/${t}`,className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 px-4 py-3 font-semibold text-gray-700 transition-colors hover:bg-gray-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back"}),e.jsx("span",{children:"Kembali"})]}),e.jsxs(p,{href:`/doctors/${t}/booking/patient-data`,className:`group flex w-full items-center justify-center gap-2 rounded-lg px-4 py-3.5 font-bold shadow-md transition-colors ${l.selectedDate&&l.selectedTime?"cursor-pointer bg-primary text-white shadow-primary/20 hover:bg-primary-dark":"pointer-events-none cursor-not-allowed bg-gray-200 text-gray-400"}`,children:[e.jsx("span",{children:"Lanjut ke Data Customer"}),e.jsx("span",{className:"material-symbols-outlined text-[18px] transition-transform group-hover:translate-x-1",children:"arrow_forward"})]})]})]})}function C({availableSlots:t}){const{bookingData:r,setBookingData:l}=m(),n=f.useMemo(()=>r.selectedDate?Object.values(t).find(c=>c.formatted_date===r.selectedDate)?.slots??[]:[],[t,r.selectedDate]),o=s=>r.serviceType==="short"?s.available_for_short??s.available:r.serviceType==="long"?s.available_for_long??s.available:s.available,x=s=>{l({selectedTime:`${s} WIB`})};return r.serviceType?r.selectedDate?n.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"event_busy"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada jadwal tersedia untuk tanggal ini"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ketersediaan Waktu"}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full border border-gray-300 bg-white"}),e.jsx("span",{className:"text-gray-500",children:"Tersedia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-gray-500",children:"Dipilih"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-gray-200"}),e.jsx("span",{className:"text-gray-500",children:"Penuh"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4",children:n.map(s=>{const c=r.selectedTime===`${s.time} WIB`;return o(s)?c?e.jsx("button",{className:"rounded-lg border-2 border-primary bg-primary/10 px-4 py-2.5 text-sm font-bold text-primary shadow-sm ring-1 ring-primary/20",children:s.time},s.time):e.jsx("button",{onClick:()=>x(s.time),className:"cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-all hover:border-primary hover:text-primary",children:s.time},s.time):e.jsx("button",{className:"cursor-not-allowed rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-400 line-through",disabled:!0,title:s.reason==="booked"?"Sudah dibooking":s.reason==="time_off"?"Dokter tidak tersedia":"Tidak tersedia",children:s.time},s.time)})})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"calendar_month"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih tanggal terlebih dahulu"})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-amber-400",children:"warning"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih jenis layanan terlebih dahulu"})]})}function F({doctor:t,availableSlots:r}){const{bookingData:l,setBookingData:n}=m(),o=s=>{const c=s.target.value;n(c==="konsultasi"?{service:"Konsultasi",serviceType:"short"}:c==="pengobatan"?{service:"Pengobatan",serviceType:"long"}:{service:"",serviceType:""})},x=()=>l.service==="Konsultasi"?"konsultasi":l.service==="Pengobatan"?"pengobatan":"";return e.jsx("div",{className:"flex min-h-screen flex-1 flex-col items-center bg-background-light px-4 py-8 font-display md:px-10 lg:px-20",children:e.jsxs("div",{className:"flex w-full max-w-6xl flex-col gap-8",children:[e.jsx(w,{}),e.jsxs("div",{className:"flex flex-col items-start gap-8 lg:flex-row",children:[e.jsxs("div",{className:"w-full flex-1 rounded-xl border border-gray-100 bg-white p-6 shadow-sm md:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2 text-lg font-bold text-text-light",children:"Pilih Jenis Layanan"}),e.jsx("p",{className:"mb-4 text-sm text-gray-500",children:"Pilih jenis layanan yang Anda butuhkan."}),e.jsxs("select",{value:x(),onChange:o,className:"w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-base text-text-light transition-shadow focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"-- Pilih Layanan --"}),e.jsx("option",{value:"konsultasi",children:"ðŸ©º Konsultasi (Â±15 menit)"}),e.jsx("option",{value:"pengobatan",children:"ðŸ¦· Pengobatan (Â±30 menit)"})]})]}),e.jsxs("div",{className:"mb-8 border-t border-gray-100 pt-8",children:[e.jsx("h3",{className:"mb-2 text-lg font-bold text-text-light",children:"Pilih Tanggal"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Silakan pilih tanggal yang tersedia untuk"," ",l.service?.toLowerCase()||"konsultasi"," ","Anda."]})]}),e.jsx(B,{availableSlots:r}),e.jsx("div",{className:"border-t border-gray-100 pt-8",children:e.jsx(C,{availableSlots:r})})]}),e.jsx("div",{className:"sticky top-28 w-full shrink-0 lg:w-[360px]",children:e.jsx(A,{doctorId:String(t.id),doctor:t})})]})]})})}F.layout=t=>e.jsx(k,{children:e.jsx(v,{children:t})});export{F as default};
