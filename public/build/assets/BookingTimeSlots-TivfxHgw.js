import{r as h,j as e}from"./app-azI-YrL4.js";import{u as p}from"./BookingContext-DUzOfH6O.js";const D=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],N=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];function w(s){return new Date(s.getFullYear(),s.getMonth()+1,0).getDate()}function v(s){return new Date(s.getFullYear(),s.getMonth(),1).getDay()}function S(s,r,l){const n=String(r).padStart(2,"0"),c=String(l).padStart(2,"0");return`${s}-${n}-${c}`}function k(s){const r=new Date;r.setHours(0,0,0,0);const l=new Date(s);return l.setHours(0,0,0,0),l<r}function T({availableSlots:s}){const{bookingData:r,setBookingData:l}=p(),[n,c]=h.useState(new Date),m=w(n),a=v(n),d=()=>{c(new Date(n.getFullYear(),n.getMonth()-1,1))},g=()=>{c(new Date(n.getFullYear(),n.getMonth()+1,1))},u=t=>S(n.getFullYear(),n.getMonth()+1,t),b=t=>{const i=u(t),o=s[i];o&&l({selectedDate:o.formatted_date,rawSelectedDate:i,selectedTime:""})},f=t=>{const i=u(t);return s[i]?.slots.some(x=>x.available)??!1},y=t=>{const i=u(t),o=s[i];return r.selectedDate===o?.formatted_date},j=t=>{const i=new Date(n.getFullYear(),n.getMonth(),t);return k(i)};return e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between px-2",children:[e.jsx("button",{onClick:d,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-base font-bold text-text-light",children:[D[n.getMonth()]," ",n.getFullYear()]}),e.jsx("button",{onClick:g,className:"cursor-pointer rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward_ios"})})]}),e.jsx("div",{className:"mb-2 grid grid-cols-7",children:N.map((t,i)=>e.jsx("div",{className:"py-2 text-center text-xs font-bold uppercase tracking-wide text-gray-400",children:t},i))}),e.jsxs("div",{className:"grid grid-cols-7 gap-x-1 gap-y-2",children:[Array.from({length:a}).map((t,i)=>e.jsx("div",{className:"h-10 w-full"},`empty-${i}`)),Array.from({length:m},(t,i)=>i+1).map(t=>{const i=j(t),o=f(t),x=y(t);return i||!o?e.jsx("button",{className:"mx-auto flex h-10 w-10 cursor-not-allowed items-center justify-center rounded-full text-sm font-medium text-gray-300",disabled:!0,children:t},t):x?e.jsx("button",{className:"mx-auto flex h-10 w-10 scale-110 transform items-center justify-center rounded-full bg-primary text-sm font-bold text-white shadow-md shadow-primary/30",children:t},t):e.jsx("button",{onClick:()=>b(t),className:"mx-auto flex h-10 w-10 cursor-pointer items-center justify-center rounded-full text-sm font-medium text-text-light transition-colors hover:bg-gray-100",children:t},t)})]})]})}function A({availableSlots:s}){const{bookingData:r,setBookingData:l}=p(),n=h.useMemo(()=>!r.rawSelectedDate&&!r.selectedDate?[]:r.rawSelectedDate&&s[r.rawSelectedDate]?s[r.rawSelectedDate].slots??[]:Object.values(s).find(d=>d.formatted_date===r.selectedDate)?.slots??[],[s,r.rawSelectedDate,r.selectedDate]),c=a=>r.serviceType==="short"?a.available_for_short??a.available:r.serviceType==="long"?a.available_for_long??a.available:a.available,m=a=>{r.selectedTime===a?l({selectedTime:""}):l({selectedTime:a})};return r.serviceType?r.selectedDate?n.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"event_busy"}),e.jsx("p",{className:"text-gray-500",children:"Tidak ada jadwal tersedia untuk tanggal ini"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ketersediaan Waktu"}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full border border-gray-300 bg-white"}),e.jsx("span",{className:"text-gray-500",children:"Tersedia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-gray-500",children:"Dipilih"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-gray-200"}),e.jsx("span",{className:"text-gray-500",children:"Penuh"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4",children:n.map(a=>{const d=r.selectedTime===a.time;return c(a)?d?e.jsxs("button",{className:"rounded-lg border-2 border-primary bg-primary/10 px-4 py-2.5 text-sm font-bold text-primary shadow-sm ring-1 ring-primary/20",children:[a.time," WIB"]},a.time):e.jsxs("button",{onClick:()=>m(a.time),className:"cursor-pointer rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition-all hover:border-primary hover:text-primary",children:[a.time," WIB"]},a.time):e.jsxs("button",{className:"cursor-not-allowed rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-400 line-through",disabled:!0,title:a.reason==="booked"?"Sudah dibooking":a.reason==="time_off"?"Dokter tidak tersedia":"Tidak tersedia",children:[a.time," WIB"]},a.time)})})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-gray-300",children:"calendar_month"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih tanggal terlebih dahulu"})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined mb-2 text-4xl text-amber-400",children:"warning"}),e.jsx("p",{className:"text-gray-500",children:"Silakan pilih jenis layanan terlebih dahulu"})]})}export{T as B,A as a};
