import{j as e,L as n}from"./app-azI-YrL4.js";import{A as m}from"./AdminLayout-DDU1cm9R.js";import{g as o}from"./index-BIydFD2V.js";import"./AdminSidebar-BYpHplNu.js";function h(){return e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"mb-3 flex items-center text-sm font-medium text-slate-500",children:[e.jsxs(n,{href:"/admin/bookings",className:"flex items-center gap-1 transition-colors hover:text-primary",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back"}),"Kembali"]}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(n,{href:"/admin/bookings",className:"transition-colors hover:text-primary",children:"Daftar Booking"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-slate-900",children:"Detail Booking"})]}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Detail Booking"})]})}function p({doctorName:s,doctorSpeciality:l,doctorImage:r,date:a,time:t}){return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 bg-slate-50/50 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Detail Jadwal"}),e.jsx("button",{className:"text-sm font-medium text-primary hover:underline",children:"Ubah Jadwal"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row",children:[e.jsxs("div",{className:"flex min-w-[200px] items-center gap-4",children:[e.jsx("div",{className:"size-16 rounded-full border-2 border-slate-100 bg-slate-200 bg-cover bg-center",style:{backgroundImage:`url("${r}")`}}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-0.5 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Dokter"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:s}),e.jsx("p",{className:"text-sm text-slate-500",children:l})]})]}),e.jsx("div",{className:"hidden w-px bg-slate-200 sm:block"}),e.jsxs("div",{className:"flex flex-col justify-center gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2 text-primary",children:e.jsx("span",{className:"material-symbols-outlined block",children:"calendar_month"})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-0.5 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Tanggal"}),e.jsx("p",{className:"font-bold text-slate-900",children:a})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2 text-primary",children:e.jsx("span",{className:"material-symbols-outlined block",children:"schedule"})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-0.5 text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Waktu"}),e.jsx("p",{className:"font-bold text-slate-900",children:t})]})]})]})]})})]})}function b({bookingId:s,code:l,createdDate:r,status:a}){const t=()=>{try{sessionStorage.removeItem("bookingData")}catch(i){console.error("Error clearing booking data:",i)}};return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-3",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:l}),e.jsx("span",{className:"inline-flex items-center rounded-full border border-amber-200 bg-amber-100 px-2.5 py-0.5 text-xs font-semibold text-amber-800",children:a})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Dibuat pada ",r]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3 border-t border-slate-100 pt-4",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-sky-600",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),"Konfirmasi Booking"]}),e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-lg border border-red-200 bg-white px-5 py-2.5 text-sm font-semibold text-red-600 transition-colors hover:bg-red-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"cancel"}),"Batalkan"]}),e.jsxs(n,{href:`/admin/bookings/${s}/reschedule`,onClick:t,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-amber-600",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"event_repeat"}),"Reschedule Booking"]})]})]})}function u({booking:s}){const l=s.status==="confirmed",r=s.status==="checked_in",a=s.status==="cancelled";return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-100 bg-slate-50/50 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Timeline Status"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute bottom-2 left-3.5 top-2 w-0.5 bg-slate-200"}),e.jsx(d,{icon:"add_circle",title:"Booking Dibuat",time:s.created_at_formatted,status:"completed"}),e.jsx(d,{icon:a?"cancel":"check_circle",title:a?"Booking Dibatalkan":"Booking Dikonfirmasi",time:a&&s.cancellation?s.cancellation.cancelled_at:l||r?"Terkonfirmasi":void 0,description:a&&s.cancellation?`Oleh ${s.cancellation.cancelled_by}: ${s.cancellation.reason}`:void 0,status:a?"cancelled":l||r?"completed":"current"}),!a&&e.jsx(d,{icon:"how_to_reg",title:"Pasien Check-in",time:s.checkin?s.checkin.checked_in_at_formatted:void 0,status:r?"completed":l?"current":"pending"}),!a&&e.jsx(d,{icon:"flag",title:"Selesai",time:r?"Selesai":void 0,status:r?"completed":"pending",isLast:!0}),s.reschedules.length>0&&e.jsxs("div",{className:"mt-6 border-t border-slate-100 pt-6",children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold text-slate-600",children:"Riwayat Reschedule"}),s.reschedules.map(t=>e.jsx(d,{icon:"schedule",title:"Jadwal Diubah",time:t.created_at,description:`${t.old_date} ${t.old_time} → ${t.new_date} ${t.new_time}`,status:"completed"},t.id))]})]})})]})}function d({icon:s,title:l,time:r,description:a,status:t,isLast:i=!1}){const c=()=>{switch(t){case"completed":return"bg-green-100 ring-2 ring-green-100 text-green-600";case"current":return"bg-primary ring-4 ring-primary/20 text-white animate-pulse";case"cancelled":return"bg-red-100 ring-2 ring-red-100 text-red-600";default:return"bg-slate-100 text-slate-400"}},x=()=>{switch(t){case"current":return"text-primary";case"cancelled":return"text-red-600";default:return"text-slate-900"}};return e.jsxs("div",{className:`relative flex items-start gap-4 ${i?"":"mb-8"} ${t==="pending"?"opacity-50":""}`,children:[e.jsx("div",{className:`relative z-10 flex size-8 items-center justify-center rounded-full border-2 border-white ${c()}`,children:e.jsx("span",{className:"material-symbols-outlined text-[16px] font-bold",children:t==="completed"&&s!=="schedule"?"check":s})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsx("h4",{className:`text-sm font-bold ${x()}`,children:l}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:r||(t==="current"?"Proses selanjutnya":"-")}),a&&e.jsx("p",{className:"mt-1 text-xs text-slate-600",children:a})]})]})}function j({notifications:s}){const l=t=>{const i=new Date(t);return new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(i)},r=t=>{switch(t){case"sent":return"bg-green-100 text-green-700 border-green-200";case"failed":return"bg-red-100 text-red-700 border-red-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},a=t=>{switch(t){case"whatsapp":return"chat";case"email":return"mail";default:return"notifications"}};return s.length===0?e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-slate-900",children:"Riwayat Notifikasi"}),e.jsx("div",{className:"py-8 text-center text-slate-500",children:"Belum ada riwayat notifikasi"})]}):e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-6 text-lg font-bold text-slate-900",children:"Riwayat Notifikasi"}),e.jsx("div",{className:"space-y-8",children:s.map(t=>e.jsxs("div",{className:"group flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border ${t.status==="sent"?"border-blue-200 bg-blue-50 text-blue-600":"border-gray-200 bg-gray-50 text-gray-500"}`,children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:a(t.channel)})}),e.jsx("div",{className:"my-2 h-full w-px bg-slate-200 group-last:hidden"})]}),e.jsxs("div",{className:"flex-1 space-y-3 pb-6",children:[e.jsxs("div",{className:"relative rounded-2xl rounded-tl-none border border-slate-200 bg-slate-50 p-4",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 border-b border-slate-200 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`rounded-full border px-2.5 py-0.5 text-xs font-semibold ${r(t.status)} capitalize`,children:t.status}),e.jsxs("span",{className:"text-xs font-medium uppercase tracking-wider text-slate-500",children:[t.channel," •"," ",t.type.replace("_"," ")]})]}),e.jsx("span",{className:"text-xs text-slate-400",children:l(t.created_at)})]}),e.jsx("div",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed text-slate-700",children:t.payload})]}),e.jsx("div",{className:"pl-2",children:e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 bg-white",children:e.jsx("table",{className:"min-w-full divide-y divide-slate-100",children:e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4 bg-slate-50 px-4 py-2 text-xs font-medium text-slate-500",children:"Penerima"}),e.jsx("td",{className:"px-4 py-2 font-mono text-xs text-slate-700",children:t.recipient})]}),t.sent_at&&e.jsxs("tr",{children:[e.jsx("td",{className:"bg-slate-50 px-4 py-2 text-xs font-medium text-slate-500",children:"Terikirim Pada"}),e.jsx("td",{className:"px-4 py-2 text-xs text-slate-700",children:l(t.sent_at)})]}),t.last_error&&e.jsxs("tr",{children:[e.jsx("td",{className:"bg-red-50 px-4 py-2 text-xs font-medium text-red-500",children:"Error Log"}),e.jsx("td",{className:"break-all px-4 py-2 font-mono text-xs text-red-600",children:t.last_error})]})]})})})})]})]},t.id))})]})}function f({name:s,type:l,nik:r,whatsapp:a,email:t,note:i}){return e.jsxs("div",{className:"sticky top-24 rounded-xl border border-slate-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-100 bg-slate-50/50 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Data Pasien"})}),e.jsxs("div",{className:"flex flex-col items-center border-b border-slate-100 p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s}),e.jsx("p",{className:"text-sm text-slate-500",children:l})]}),e.jsxs("div",{className:"space-y-5 p-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500",children:"NIK"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:r})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500",children:"Nomor WhatsApp"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:a}),e.jsx("button",{className:"text-slate-400 transition-colors hover:text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500",children:"Email"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold uppercase text-slate-500",children:"Catatan Pasien"}),e.jsxs("span",{className:"text-sm font-medium italic text-slate-900",children:['"',i,'"']})]}),e.jsx("div",{className:"mt-2 pt-4",children:e.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg bg-[#25D366] px-4 py-3 text-sm font-bold text-white shadow-sm transition-colors hover:bg-[#20bd5a]",children:[e.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l121.7-31.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"})}),"Hubungi via WA"]})})]})]})}function g({booking:s,notifications:l}){return e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:col-span-2",children:[e.jsx(b,{bookingId:s.id,code:`#${s.code}`,createdDate:s.created_at_formatted,status:o(s.status)}),e.jsx(p,{doctorName:s.doctor.name,doctorSpeciality:`SIP: ${s.doctor.sip}`,doctorImage:s.doctor.profile_pic||"/images/default-doctor.jpg",date:s.booking_date_formatted,time:`${s.start_time} WIB`}),e.jsx(u,{booking:s}),e.jsx(j,{notifications:l})]}),e.jsx("div",{className:"flex flex-col gap-6 lg:col-span-1",children:e.jsx(f,{name:s.patient.name,type:"Pasien",nik:s.patient.nik,whatsapp:s.patient.phone,email:s.patient.email,note:s.patient.complaint})})]})]})}g.layout=s=>e.jsx(m,{children:s});export{g as default};
