import{j as e,L as v,r as m}from"./app-CVFEodcP.js";import{A as y}from"./AdminLayout-CU3Zt6zL.js";import"./AdminSidebar-BcrHo4xb.js";function w({searchQuery:s,setSearchQuery:t}){return e.jsx("div",{className:"rounded-t-xl border-b border-slate-100 bg-white p-5",children:e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("div",{className:"relative w-full md:max-w-md",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"search"})}),e.jsx("input",{className:"block w-full rounded-lg border-none bg-slate-50 py-2.5 pl-10 pr-3 text-sm text-slate-900 transition-all placeholder:text-slate-400 focus:bg-white focus:ring-2 focus:ring-primary",placeholder:"Cari Nama, NIK, atau WhatsApp...",type:"text",value:s,onChange:o=>t(o.target.value)})]}),e.jsxs("div",{className:"flex w-full gap-2 md:w-auto",children:[e.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg bg-slate-50 px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-100 md:w-auto",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"filter_list"}),e.jsx("span",{children:"Filter"})]}),e.jsxs("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg bg-slate-50 px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-100 md:w-auto",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"download"}),e.jsx("span",{children:"Export"})]})]})]})})}function k({totalPatients:s}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(v,{href:"/admin",className:"font-medium text-slate-500 transition-colors hover:text-primary",children:"Dashboard"}),e.jsx("span",{className:"select-none text-slate-400",children:"/"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Pasien"})]}),e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-end",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-slate-900 md:text-3xl",children:"Daftar Pasien"}),e.jsxs("p",{className:"text-base text-slate-500",children:["Kelola data pasien, riwayat, dan detail kontak."," ",e.jsxs("span",{className:"font-medium text-primary",children:["Total: ",s," pasien"]})]})]}),e.jsxs("button",{className:"flex h-10 shrink-0 items-center justify-center gap-2 rounded-lg bg-primary px-6 text-sm font-bold text-white shadow-sm transition-all hover:bg-sky-600 active:scale-95",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),e.jsx("span",{children:"Tambah Pasien"})]})]})]})}function _({currentPage:s,totalPages:t,totalItems:o,itemsPerPage:n,setCurrentPage:x}){if(t<=1)return null;const r=(s-1)*n+1,d=Math.min(s*n,o);return e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 rounded-b-xl border-t border-slate-100 bg-white p-4 sm:flex-row",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:["Menampilkan"," ",e.jsx("span",{className:"font-semibold text-slate-700",children:r})," ","-"," ",e.jsx("span",{className:"font-semibold text-slate-700",children:d})," ","dari"," ",e.jsx("span",{className:"font-semibold text-slate-700",children:o})," ","pasien"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(Math.max(1,s-1)),disabled:s===1,className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_left"})}),Array.from({length:Math.min(5,t)},(a,c)=>{let l=c+1;return t>5&&(s<=3?l=c+1:s>=t-2?l=t-4+c:l=s-2+c),e.jsx("button",{onClick:()=>x(l),className:`flex size-8 items-center justify-center rounded-lg text-sm font-medium transition-all ${s===l?"bg-primary text-white shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:l},l)}),e.jsx("button",{onClick:()=>x(Math.min(t,s+1)),disabled:s===t,className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chevron_right"})})]})]})}function C({patients:s,currentPage:t,itemsPerPage:o,sortField:n,sortOrder:x,onSort:r}){const d=({field:a})=>n!==a?e.jsx("span",{className:"material-symbols-outlined text-[16px] text-slate-300",children:"unfold_more"}):e.jsx("span",{className:"material-symbols-outlined text-[16px] text-primary",children:x==="asc"?"arrow_upward":"arrow_downward"});return e.jsx("div",{className:"w-full overflow-x-auto bg-white",children:s.length>0?e.jsxs("table",{className:"w-full border-collapse text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50",children:[e.jsx("th",{className:"w-16 p-4 text-center text-xs font-semibold uppercase tracking-wide text-slate-500",children:"No"}),e.jsx("th",{className:"min-w-[200px] cursor-pointer p-4 text-xs font-semibold uppercase tracking-wide text-slate-500 hover:text-primary",onClick:()=>r("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Nama",e.jsx(d,{field:"name"})]})}),e.jsx("th",{className:"min-w-[180px] p-4 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"NIK"}),e.jsx("th",{className:"min-w-[160px] p-4 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"WhatsApp"}),e.jsx("th",{className:"min-w-[140px] cursor-pointer p-4 text-center text-xs font-semibold uppercase tracking-wide text-slate-500 hover:text-primary",onClick:()=>r("total_visits"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Total Kunjungan",e.jsx(d,{field:"total_visits"})]})}),e.jsx("th",{className:"cursor-pointer p-4 text-xs font-semibold uppercase tracking-wide text-slate-500 hover:text-primary",onClick:()=>r("last_visit"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Dibuat Pada",e.jsx(d,{field:"last_visit"})]})}),e.jsx("th",{className:"w-24 p-4 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map((a,c)=>e.jsxs("tr",{className:"group transition-colors hover:bg-slate-50",children:[e.jsx("td",{className:"p-4 text-center text-sm text-slate-400",children:(t-1)*o+c+1}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:a.name}),e.jsx("span",{className:"text-xs text-slate-500",children:a.email})]})}),e.jsx("td",{className:"p-4 font-mono text-sm text-slate-600",children:a.nik}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex size-6 items-center justify-center rounded-md bg-green-50 text-green-500",children:e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"chat"})}),e.jsx("span",{className:"font-mono text-sm text-slate-600",children:a.phone})]})}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2.5 py-0.5 text-xs font-medium text-primary",children:[a.total_visits," Kunjungan"]})}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:a.first_visit_formatted}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx("button",{className:"rounded-md p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-primary",title:"Lihat Detail",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})})})]},a.nik))})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"person_search"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Tidak ada pasien ditemukan"})]})})}function S({patients:s}){const[t,o]=m.useState(""),[n,x]=m.useState("last_visit"),[r,d]=m.useState("desc"),[a,c]=m.useState(1),l=10,u=m.useMemo(()=>s.filter(i=>t===""||i.name.toLowerCase().includes(t.toLowerCase())||i.nik.includes(t)||i.phone.includes(t)),[s,t]),f=m.useMemo(()=>[...u].sort((i,p)=>{let h=0;return n==="name"?h=i.name.localeCompare(p.name):n==="total_visits"?h=i.total_visits-p.total_visits:n==="last_visit"&&(h=new Date(i.last_visit).getTime()-new Date(p.last_visit).getTime()),r==="asc"?h:-h}),[u,n,r]),j=Math.ceil(f.length/l),b=f.slice((a-1)*l,a*l),N=i=>{o(i),c(1)},g=i=>{n===i?d(r==="asc"?"desc":"asc"):(x(i),d("asc"))};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(k,{totalPatients:u.length}),e.jsxs("div",{className:"flex flex-col rounded-xl shadow-sm",children:[e.jsx(w,{searchQuery:t,setSearchQuery:N}),e.jsx(C,{patients:b,currentPage:a,itemsPerPage:l,sortField:n,sortOrder:r,onSort:g}),e.jsx(_,{currentPage:a,totalPages:j,totalItems:f.length,itemsPerPage:l,setCurrentPage:c})]}),e.jsx("footer",{className:"mt-8 pb-8 text-center text-xs text-slate-400",children:"Â© 2024 Dental Clinic Admin. All rights reserved."})]})}S.layout=s=>e.jsx(y,{children:s});export{S as default};
