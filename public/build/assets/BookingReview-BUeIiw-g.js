import{r as m,j as e,L as N,d as k}from"./app-BIRp2Rbv.js";import{B as v}from"./BookingHeader-Cy4WgxJO.js";import{u as x,B as w}from"./BookingContext-CM2TI5VD.js";import{P as A}from"./PatientLayout-sQP7mc_w.js";import"./Navbar-yH9ng6JF.js";function S({doctorId:s}){const[a,o]=m.useState(!1),[p,r]=m.useState(!1),[n,c]=m.useState(!1),{bookingData:t,resetBookingData:h}=x(),u=()=>{if(!a||n)return;c(!0);const i=l=>{const j={Januari:"01",Februari:"02",Maret:"03",April:"04",Mei:"05",Juni:"06",Juli:"07",Agustus:"08",September:"09",Oktober:"10",November:"11",Desember:"12"},d=l.split(", ")[1]?.split(" ")||[];if(d.length===3){const y=d[0].padStart(2,"0"),f=j[d[1]]||"01";return`${d[2]}-${f}-${y}`}return l},g=l=>l.replace(" WIB",""),b={doctor_id:s,booking_date:i(t.selectedDate),start_time:g(t.selectedTime),service:t.service,type:t.serviceType,patient_name:t.fullName,patient_nik:t.nik,patient_email:t.email||null,patient_phone:t.whatsapp,patient_birthdate:t.birthdate,patient_address:t.address};k.post("/booking/create",b,{onSuccess:()=>{h()},onError:()=>{c(!1)},onFinish:()=>{c(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 pt-2",children:[e.jsxs("label",{className:"group flex cursor-pointer items-start gap-3 rounded-xl border border-transparent p-4 transition-all hover:bg-white hover:shadow-sm",children:[e.jsxs("div",{className:"relative flex items-center pt-0.5",children:[e.jsx("input",{className:"peer h-5 w-5 cursor-pointer appearance-none rounded border border-gray-300 bg-white transition-all checked:border-primary checked:bg-primary hover:border-primary focus:ring-2 focus:ring-primary/20 focus:ring-offset-0",type:"checkbox",checked:a,onChange:i=>o(i.target.checked)}),e.jsx("span",{className:"material-symbols-outlined pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-[16px] text-white opacity-0 transition-opacity peer-checked:opacity-100",children:"check"})]}),e.jsxs("div",{className:"select-none text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Saya setuju dengan"}),e.jsx("button",{type:"button",className:"ml-1 font-medium text-primary hover:underline",onClick:i=>{i.preventDefault(),i.stopPropagation(),r(!0)},children:"syarat & ketentuan"}),e.jsxs("span",{className:"text-gray-700",children:[" ","yang berlaku di klinik ini."]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse gap-4 pt-2 sm:flex-row",children:[e.jsx(N,{href:`/doctors/${s}/booking/patient-data`,className:"flex flex-1 cursor-pointer items-center justify-center rounded-xl border border-gray-300 px-6 py-3 font-semibold text-gray-700 transition-colors hover:bg-gray-50",children:"Ubah Data"}),a?e.jsx("button",{type:"button",onClick:u,disabled:n,className:`flex-2 flex items-center justify-center gap-2 rounded-xl px-6 py-3 font-bold text-white shadow-lg transition-all ${n?"cursor-not-allowed bg-gray-400":"cursor-pointer bg-primary shadow-primary/25 hover:bg-primary-dark hover:shadow-primary/40"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin",children:"â³"}),e.jsx("span",{children:"Memproses..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Konfirmasi Booking"}),e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})}):e.jsxs("button",{type:"button",disabled:!0,className:"flex-2 flex cursor-not-allowed items-center justify-center gap-2 rounded-xl bg-gray-300 px-6 py-3 font-bold text-gray-500",children:[e.jsx("span",{children:"Konfirmasi Booking"}),e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"lock"}),e.jsx("span",{children:"Data Anda dilindungi dan terenkripsi."})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>r(!1),children:e.jsxs("div",{className:"max-h-[85vh] w-full max-w-lg overflow-hidden rounded-2xl bg-white shadow-2xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Syarat & Ketentuan"}),e.jsx("button",{type:"button",onClick:()=>r(!1),className:"flex size-8 cursor-pointer items-center justify-center rounded-full text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4 text-sm leading-relaxed text-gray-600",children:[e.jsx("h4",{className:"font-semibold text-text-light",children:"1. Ketentuan Umum"}),e.jsx("p",{children:"Dengan melakukan booking melalui sistem ini, Anda menyetujui untuk mematuhi semua syarat dan ketentuan yang berlaku di Cantika Dental Care."}),e.jsx("h4",{className:"font-semibold text-text-light",children:"2. Jadwal Kunjungan"}),e.jsx("p",{children:"Pasien diharapkan hadir 15 menit sebelum jadwal yang telah ditentukan. Keterlambatan lebih dari 30 menit dapat mengakibatkan pembatalan otomatis booking."}),e.jsx("h4",{className:"font-semibold text-text-light",children:"3. Pembatalan"}),e.jsx("p",{children:"Pembatalan dapat dilakukan minimal 3 jam sebelum jadwal kunjungan melalui WhatsApp atau menghubungi klinik secara langsung."}),e.jsx("h4",{className:"font-semibold text-text-light",children:"4. Pembayaran"}),e.jsx("p",{children:"Pembayaran dilakukan langsung di klinik setelah tindakan selesai. Kami menerima pembayaran tunai dan non-tunai (kartu debit/kredit, QRIS)."}),e.jsx("h4",{className:"font-semibold text-text-light",children:"5. Data Pribadi"}),e.jsx("p",{children:"Data pribadi Anda akan dijaga kerahasiaannya dan hanya digunakan untuk keperluan pelayanan kesehatan di klinik kami sesuai dengan peraturan yang berlaku."}),e.jsx("h4",{className:"font-semibold text-text-light",children:"6. Perubahan Jadwal"}),e.jsx("p",{children:"Klinik berhak melakukan perubahan jadwal apabila terjadi kondisi darurat. Kami akan menginformasikan perubahan tersebut melalui WhatsApp yang terdaftar."})]})}),e.jsx("div",{className:"border-t border-gray-100 px-6 py-4",children:e.jsx("button",{type:"button",onClick:()=>{o(!0),r(!1)},className:"w-full cursor-pointer rounded-xl bg-primary px-6 py-3 font-bold text-white transition-colors hover:bg-primary-dark",children:"Saya Setuju"})})]})})]})}function _({doctor:s}){const{bookingData:a}=x();return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 bg-gray-50/50 px-6 py-4",children:[e.jsx("span",{className:"material-symbols-outlined text-xl text-primary",children:"receipt_long"}),e.jsx("h3",{className:"font-semibold text-text-light",children:"Ringkasan Booking"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-start gap-4 border-b border-dashed border-gray-200 pb-8 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"relative size-16 shrink-0 overflow-hidden rounded-full bg-gray-100",children:e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:`url("${s?.profile_pic||"/img/default-doctor.png"}")`}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-primary",children:"Dokter Pilihan"}),e.jsx("h4",{className:"text-lg font-bold text-text-light",children:s?.name||"Loading..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"calendar_today"}),e.jsx("span",{children:"Tanggal"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.selectedDate})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"schedule"}),e.jsx("span",{children:"Waktu"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.selectedTime})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person"}),e.jsx("span",{children:"Nama Pasien"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.fullName||"-"})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"badge"}),e.jsx("span",{children:"NIK"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.nik||"-"})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"chat"}),e.jsx("span",{children:"Nomor WhatsApp"})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-7",children:[e.jsx("p",{className:"font-medium text-text-light",children:a.whatsapp?`+62 ${a.whatsapp}`:"-"}),a.whatsapp&&e.jsx("span",{className:"material-symbols-outlined text-[18px] text-green-500",title:"Verified",children:"verified"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"mail"}),e.jsx("span",{children:"Email"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.email||"-"})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"medical_services"}),e.jsx("span",{children:"Layanan"})]}),e.jsxs("p",{className:"pl-7 font-medium text-text-light",children:[a.service||"-",a.serviceType&&e.jsx("span",{className:"ml-2 rounded bg-primary/10 px-2 py-0.5 text-xs text-primary",children:a.serviceType==="long"?"45 menit":"15 menit"})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"cake"}),e.jsx("span",{children:"Tanggal Lahir"})]}),e.jsx("p",{className:"pl-7 font-medium text-text-light",children:a.birthdate||"-"})]}),e.jsxs("div",{className:"group sm:col-span-2",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"home"}),e.jsx("span",{children:"Alamat"})]}),e.jsx("div",{className:"pl-7",children:e.jsx("p",{className:"font-medium text-text-light",children:a.address||"-"})})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 border-t border-primary/10 bg-primary/5 px-6 py-3",children:[e.jsx("span",{className:"material-symbols-outlined mt-0.5 text-xl text-primary",children:"info"}),e.jsx("p",{className:"text-xs leading-relaxed text-gray-600",children:"Mohon cek kembali data Anda. Setelah konfirmasi, kami akan mengirimkan detail booking melalui WhatsApp untuk verifikasi."})]})]})}function D(){return e.jsx("div",{className:"hidden space-y-6 lg:block",children:e.jsxs("div",{className:"sticky top-24 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 font-semibold text-text-light",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"help"}),"Bantuan"]}),e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-gray-500",children:"Jika Anda mengalami kesulitan saat melakukan booking atau ingin mengubah jadwal, silakan hubungi admin kami."}),e.jsxs("a",{className:"group flex cursor-pointer items-center gap-3 rounded-lg bg-green-50 p-3 text-green-700 transition-colors hover:bg-green-100",href:"#",children:[e.jsx("div",{className:"flex size-8 items-center justify-center rounded-full bg-green-500 text-white shadow-sm",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"call"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium opacity-80",children:"WhatsApp Admin"}),e.jsx("p",{className:"text-sm font-bold group-hover:underline",children:"+62 812-3456-7890"})]})]})]})})}function P({doctor:s}){return e.jsxs("div",{className:"mx-auto w-full max-w-4xl flex-grow px-4 py-8 font-display sm:px-6 sm:py-12",children:[e.jsx("div",{className:"mb-8",children:e.jsx(v,{currentStep:3})}),e.jsxs("div",{className:"mt-8 grid gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsx(_,{doctor:s}),e.jsx(S,{doctorId:String(s.id)})]}),e.jsx(D,{})]})]})}P.layout=s=>e.jsx(A,{children:e.jsx(w,{children:s})});export{P as default};
