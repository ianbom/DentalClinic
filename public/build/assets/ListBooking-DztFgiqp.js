import{j as e,r as u,L as T}from"./app-azI-YrL4.js";import{B as I}from"./BookingTable-uH9FLyR7.js";import{A}from"./AdminLayout-DDU1cm9R.js";import"./index-BIydFD2V.js";import"./AdminSidebar-BYpHplNu.js";function E({searchQuery:a,statusFilter:o,dateFilter:l,doctorFilter:c,doctors:i,onSearchChange:n,onStatusChange:x,onDateChange:p,onDoctorChange:s,onClearFilters:d}){const h=a||o||l||c;return e.jsx("div",{className:"flex flex-col gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 sm:min-w-[240px]",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-xl text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Cari kode, nama, atau telepon...",value:a,onChange:r=>n(r.target.value),className:"w-full rounded-lg border border-slate-200 py-2.5 pl-10 pr-4 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-xl text-slate-400",children:"calendar_today"}),e.jsx("input",{type:"date",value:l,onChange:r=>p(r.target.value),className:"rounded-lg border border-slate-200 py-2.5 pl-10 pr-4 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("select",{value:c,onChange:r=>s(r.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Semua Dokter"}),i.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]}),e.jsxs("select",{value:o,onChange:r=>x(r.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"checked_in",children:"Checked In"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"no_show",children:"No Show"})]}),h&&e.jsxs("button",{onClick:d,className:"flex cursor-pointer items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-4 py-2.5 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"}),"Clear"]})]})})}function O(a){return{filterBookings:(o,l,c,i)=>a.filter(n=>{const x=o===""||n.code.toLowerCase().includes(o.toLowerCase())||n.patient_name.toLowerCase().includes(o.toLowerCase())||n.patient_phone.includes(o),p=l===""||n.status===l,s=c===""||n.booking_date===c,d=i===""||n.doctor_name===i;return x&&p&&s&&d})}}function V({currentPage:a,totalPages:o,totalItems:l,itemsPerPage:c,onPageChange:i}){if(o<=1)return null;const n=(a-1)*c+1,x=Math.min(a*c,l),p=Array.from({length:o},(s,d)=>d+1).filter(s=>s===1||s===o||Math.abs(s-a)<=1);return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-4 py-3",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Menampilkan ",n," - ",x," dari ",l," booking"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,a-1)),disabled:a===1,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Prev"}),p.map((s,d,h)=>e.jsxs("span",{children:[d>0&&h[d-1]!==s-1&&e.jsx("span",{className:"px-2 text-slate-400",children:"..."}),e.jsx("button",{onClick:()=>i(s),className:`cursor-pointer rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${a===s?"bg-primary text-white":"border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:s})]},s)),e.jsx("button",{onClick:()=>i(Math.min(o,a+1)),disabled:a===o,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})]})}function K({bookings:a,doctors:o}){const[l,c]=u.useState(""),[i,n]=u.useState(""),[x,p]=u.useState(""),[s,d]=u.useState(""),[h,r]=u.useState(1),[m,_]=u.useState(10),[g,B]=u.useState(""),[b,w]=u.useState("asc"),{filterBookings:C}=O(a),k=u.useMemo(()=>C(l,i,x,s),[C,l,i,x,s]),j=u.useMemo(()=>g?[...k].sort((t,f)=>{let y,v;switch(g){case"patient_name":y=t.patient_name.toLowerCase(),v=f.patient_name.toLowerCase();break;case"booking_date":y=new Date(t.booking_date).getTime(),v=new Date(f.booking_date).getTime();break;case"created_at":y=new Date(t.created_at).getTime(),v=new Date(f.created_at).getTime();break;default:return 0}return y<v?b==="asc"?-1:1:y>v?b==="asc"?1:-1:0}):k,[k,g,b]),S=m===0?j:j.slice((h-1)*m,h*m),D=m===0?1:Math.ceil(j.length/m),N=(t,f)=>{r(1),t==="search"?c(f):t==="status"?n(f):t==="date"?p(f):t==="doctor"&&d(f)};console.log(S);const L=()=>{c(""),n(""),p(""),d(""),r(1)},M=t=>{_(t),r(1)},F=t=>{g===t?w(b==="asc"?"desc":"asc"):(B(t),w("asc")),r(1)};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Daftar Booking"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Kelola semua data booking pasien"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"rounded-full bg-primary/10 px-4 py-1.5 text-sm font-medium text-primary",children:["Total: ",k.length," booking"]}),e.jsxs(T,{href:"/admin/bookings/create",className:"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-primary-dark",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Buat Booking"]})]})]}),e.jsx(E,{searchQuery:l,statusFilter:i,dateFilter:x,doctorFilter:s,doctors:o,onSearchChange:t=>N("search",t),onStatusChange:t=>N("status",t),onDateChange:t=>N("date",t),onDoctorChange:t=>N("doctor",t),onClearFilters:L}),e.jsx(I,{bookings:S,showExpandable:!0,showActions:!0,currentPage:h,itemsPerPage:m===0?j.length:m,emptyMessage:"Tidak ada booking ditemukan",sortField:g,sortOrder:b,onSort:F}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Tampilkan:"}),e.jsxs("select",{value:m,onChange:t=>M(Number(t.target.value)),className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:0,children:"Semua"})]}),e.jsx("span",{className:"text-sm text-slate-500",children:"data"})]}),m!==0&&e.jsx(V,{currentPage:h,totalPages:D,totalItems:j.length,itemsPerPage:m,onPageChange:r})]})]})}K.layout=a=>e.jsx(A,{children:a});export{K as default};
