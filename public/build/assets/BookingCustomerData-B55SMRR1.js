import{j as e,r as c,L as x,d as u}from"./app-CVFEodcP.js";import{B as f}from"./BookingHeader-C1ttAiVs.js";import{u as m,B as b}from"./BookingContext-Bzj4Jhtb.js";import{P as j}from"./PatientLayout-CKuMsO0l.js";import"./Navbar-BwaOck3u.js";function y({doctor:t}){const{bookingData:a}=m();return e.jsxs("div",{className:"sticky top-24 flex cursor-default flex-col gap-6 rounded-xl border border-gray-100 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:e.jsx("h3",{className:"text-lg font-bold text-text-light",children:"Ringkasan Booking"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"relative size-16 shrink-0 overflow-hidden rounded-full bg-gray-100",children:e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:`url("${t?.profile_pic||"/img/default-doctor.png"}")`}})}),e.jsx("div",{className:"flex flex-col justify-center",children:e.jsx("p",{className:"font-bold text-text-light",children:t?.name||"Loading..."})})]}),e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg bg-background-light p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined mt-0.5 text-[20px] text-primary",children:"calendar_month"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-light",children:a.selectedDate}),e.jsx("p",{className:"text-xs text-gray-500",children:a.selectedTime})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined mt-0.5 text-[20px] text-primary",children:"location_on"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-light",children:"Cantika Dental Care"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dandong, Kec. Srengat, Kabupaten Blitar"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined mt-0.5 text-[20px] text-primary",children:"medical_services"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-light",children:"Konsultasi"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Durasi: 60 Menit"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"lock"}),e.jsx("p",{className:"text-xs font-medium",children:"Data Anda aman dan terenkripsi."})]})]})}function N({doctorId:t}){const{bookingData:a,setBookingData:o}=m(),[l,n]=c.useState(!1),[d,i]=c.useState(""),r=(s,h)=>{o({[s]:h}),s==="whatsapp"&&i("")},p=()=>{if(!a.whatsapp||a.whatsapp.length<10){i("Masukkan nomor WhatsApp yang valid");return}n(!0),i(""),u.post("/verify-wa",{patient_phone:a.whatsapp},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{o({isWhatsappVerified:!0}),n(!1)},onError:()=>{i("Gagal mengirim pesan verifikasi. Coba lagi."),n(!1)}})},g=a.fullName.trim()!==""&&a.nik.trim()!==""&&a.whatsapp.trim()!==""&&a.whatsapp.length>=10&&a.isWhatsappVerified;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2 border-b border-subtle-light pb-6",children:[e.jsx("h1",{className:"text-3xl font-bold leading-tight text-text-light",children:"Isi Data Diri"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pastikan nomor WhatsApp aktif untuk verifikasi pesanan dan notifikasi jadwal."})]}),e.jsxs("form",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-light",htmlFor:"fullname",children:"Nama Lengkap*"}),e.jsx("input",{className:"flex h-12 w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-base text-text-light transition-shadow placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",id:"fullname",placeholder:"Masukkan nama lengkap Anda sesuai KTP",type:"text",required:!0,value:a.fullName,onChange:s=>r("fullName",s.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-light",htmlFor:"nik",children:"NIK*"}),e.jsx("input",{className:"flex h-12 w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-base text-text-light transition-shadow placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",id:"nik",placeholder:"Masukkan NIK Anda sesuai KTP",type:"text",required:!0,value:a.nik,onChange:s=>r("nik",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-light",htmlFor:"whatsapp",children:"Nomor WhatsApp*"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"ðŸ“ž"}),e.jsx("div",{className:"ml-2 h-4 w-px bg-gray-300"})]}),e.jsx("input",{className:`flex h-12 w-full rounded-lg border bg-white py-3 pl-[70px] pr-4 text-base text-text-light transition-shadow placeholder:text-gray-400 focus:outline-none focus:ring-1 ${a.isWhatsappVerified?"border-green-300 focus:border-green-400 focus:ring-green-400":"border-gray-200 focus:border-primary focus:ring-primary"}`,id:"whatsapp",placeholder:"0812-3456-7890",type:"tel",required:!0,value:a.whatsapp,onChange:s=>r("whatsapp",s.target.value)}),a.isWhatsappVerified&&e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4",children:e.jsx("span",{className:"material-symbols-outlined text-green-500",children:"verified"})})]}),!a.isWhatsappVerified&&e.jsxs("button",{type:"button",onClick:p,disabled:l||!a.whatsapp||a.whatsapp.length<10,className:`mt-2 flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${l||!a.whatsapp||a.whatsapp.length<10?"cursor-not-allowed bg-gray-200 text-gray-400":"cursor-pointer bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:l?"hourglass_empty":"send"}),l?"Mengirim...":"Kirim Verifikasi WhatsApp"]}),a.isWhatsappVerified&&e.jsx("div",{className:"mt-2 rounded-lg border border-green-200 bg-green-50 p-3 text-sm text-green-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),e.jsx("p",{children:"Nomor WhatsApp telah terverifikasi. Anda dapat melanjutkan proses booking."})]})}),d&&e.jsx("div",{className:"mt-2 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),e.jsx("p",{children:d})]})}),!a.isWhatsappVerified&&e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Klik tombol di atas untuk memverifikasi nomor WhatsApp Anda sebelum melanjutkan."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-light",htmlFor:"email",children:["Email"," ",e.jsx("span",{className:"font-normal text-gray-400",children:"(Opsional)"})]}),e.jsx("input",{className:"flex h-12 w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-base text-text-light transition-shadow placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",id:"email",placeholder:"contoh@email.com",type:"email",value:a.email,onChange:s=>r("email",s.target.value)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-light",htmlFor:"notes",children:["Keluhan / Catatan"," ",e.jsx("span",{className:"font-normal text-gray-400",children:"(Opsional)"})]}),e.jsx("textarea",{className:"flex w-full resize-none rounded-lg border border-gray-200 bg-white px-4 py-3 text-base text-text-light placeholder:text-gray-400 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",id:"notes",placeholder:"Jelaskan keluhan singkat atau catatan khusus untuk dokter...",rows:4,value:a.complaint,onChange:s=>r("complaint",s.target.value)})]}),!a.isWhatsappVerified&&e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"warning"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Verifikasi diperlukan:"})," Anda harus memverifikasi nomor WhatsApp sebelum melanjutkan ke halaman review."]})]})}),e.jsxs("div",{className:"mt-4 flex flex-col justify-end gap-3 border-t border-subtle-light pt-4 sm:flex-row",children:[e.jsxs(x,{href:`/doctors/${t}/booking`,className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg border border-gray-300 px-6 py-3 font-semibold text-gray-700 transition-all hover:bg-gray-50 md:w-auto",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),e.jsx("span",{children:"Kembali"})]}),g?e.jsxs(x,{href:`/doctors/${t}/booking/patient-data/review`,className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-lg bg-primary px-8 py-3 font-bold text-white transition-all hover:bg-primary-dark focus:ring-4 focus:ring-primary/20 md:w-auto",children:[e.jsx("span",{children:"Lanjut ke Review"}),e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]}):e.jsxs("button",{type:"button",disabled:!0,className:"flex w-full cursor-not-allowed items-center justify-center gap-2 rounded-lg bg-gray-300 px-8 py-3 font-bold text-gray-500 md:w-auto",children:[e.jsx("span",{children:"Lanjut ke Review"}),e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})]})]})]})}function v({doctor:t}){return e.jsx("div",{className:"flex min-h-screen flex-1 flex-col items-center bg-background-light px-4 py-8 font-display md:px-10 lg:px-20",children:e.jsxs("div",{className:"flex w-full max-w-6xl flex-col gap-8",children:[e.jsx(f,{currentStep:2}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsx(N,{doctorId:String(t.id)})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx(y,{doctor:t})})]})]})})}v.layout=t=>e.jsx(j,{children:e.jsx(b,{children:t})});export{v as default};
