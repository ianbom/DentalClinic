import{j as e,r as p}from"./app-CNytDeoX.js";import{B as C}from"./BookingTable-D1RRNtPP.js";import{A as k}from"./AdminLayout-CeBhntKS.js";import"./index-BIydFD2V.js";import"./AdminSidebar-BrSMu-Gs.js";function w({searchQuery:s,statusFilter:o,dateFilter:l,doctorFilter:c,doctors:n,onSearchChange:r,onStatusChange:m,onDateChange:x,onDoctorChange:t,onClearFilters:d}){const u=s||o||l||c;return e.jsx("div",{className:"flex flex-col gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 sm:min-w-[240px]",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-xl text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Cari kode, nama, atau telepon...",value:s,onChange:a=>r(a.target.value),className:"w-full rounded-lg border border-slate-200 py-2.5 pl-10 pr-4 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-xl text-slate-400",children:"calendar_today"}),e.jsx("input",{type:"date",value:l,onChange:a=>x(a.target.value),className:"rounded-lg border border-slate-200 py-2.5 pl-10 pr-4 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"})]}),e.jsxs("select",{value:c,onChange:a=>t(a.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Semua Dokter"}),n.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))]}),e.jsxs("select",{value:o,onChange:a=>m(a.target.value),className:"rounded-lg border border-slate-200 px-4 py-2.5 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"checked_in",children:"Checked In"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"no_show",children:"No Show"})]}),u&&e.jsxs("button",{onClick:d,className:"flex cursor-pointer items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-4 py-2.5 text-sm font-medium text-red-600 transition-colors hover:bg-red-100",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"}),"Clear"]})]})})}function S(s){return{filterBookings:(o,l,c,n)=>s.filter(r=>{const m=o===""||r.code.toLowerCase().includes(o.toLowerCase())||r.patient_name.toLowerCase().includes(o.toLowerCase())||r.patient_phone.includes(o),x=l===""||r.status===l,t=c===""||r.booking_date===c,d=n===""||r.doctor_name===n;return m&&x&&t&&d})}}function B({currentPage:s,totalPages:o,totalItems:l,itemsPerPage:c,onPageChange:n}){if(o<=1)return null;const r=(s-1)*c+1,m=Math.min(s*c,l),x=Array.from({length:o},(t,d)=>d+1).filter(t=>t===1||t===o||Math.abs(t-s)<=1);return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-4 py-3",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Menampilkan ",r," - ",m," dari ",l," booking"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(Math.max(1,s-1)),disabled:s===1,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Prev"}),x.map((t,d,u)=>e.jsxs("span",{children:[d>0&&u[d-1]!==t-1&&e.jsx("span",{className:"px-2 text-slate-400",children:"..."}),e.jsx("button",{onClick:()=>n(t),className:`cursor-pointer rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${s===t?"bg-primary text-white":"border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:t})]},t)),e.jsx("button",{onClick:()=>n(Math.min(o,s+1)),disabled:s===o,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})]})}function D({bookings:s,doctors:o}){const[l,c]=p.useState(""),[n,r]=p.useState(""),[m,x]=p.useState(""),[t,d]=p.useState(""),[u,a]=p.useState(1),h=10,{filterBookings:j}=S(s),f=p.useMemo(()=>j(l,n,m,t),[j,l,n,m,t]),y=Math.ceil(f.length/h),v=f.slice((u-1)*h,u*h),b=(i,g)=>{a(1),i==="search"?c(g):i==="status"?r(g):i==="date"?x(g):i==="doctor"&&d(g)},N=()=>{c(""),r(""),x(""),d(""),a(1)};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Daftar Booking"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Kelola semua data booking pasien"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"rounded-full bg-primary/10 px-4 py-1.5 text-sm font-medium text-primary",children:["Total: ",f.length," booking"]})})]}),e.jsx(w,{searchQuery:l,statusFilter:n,dateFilter:m,doctorFilter:t,doctors:o,onSearchChange:i=>b("search",i),onStatusChange:i=>b("status",i),onDateChange:i=>b("date",i),onDoctorChange:i=>b("doctor",i),onClearFilters:N}),e.jsx(C,{bookings:v,showExpandable:!0,showActions:!0,currentPage:u,itemsPerPage:h,emptyMessage:"Tidak ada booking ditemukan"}),e.jsx(B,{currentPage:u,totalPages:y,totalItems:f.length,itemsPerPage:h,onPageChange:a})]})}D.layout=s=>e.jsx(k,{children:s});export{D as default};
