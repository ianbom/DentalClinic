import{j as e,r,L}from"./app-C3gc7qHm.js";import{u as A,B as I}from"./BookingFilters-DcTRMo4f.js";import{B as E}from"./BookingTable-Cq-k7q6V.js";import{A as O}from"./AdminLayout-B8kNTLjm.js";import"./index-BIydFD2V.js";import"./AdminSidebar-BVdEzWNw.js";function Q({currentPage:a,totalPages:i,totalItems:d,itemsPerPage:x,onPageChange:l}){if(i<=1)return null;const k=(a-1)*x+1,u=Math.min(a*x,d),y=Array.from({length:i},(s,c)=>c+1).filter(s=>s===1||s===i||Math.abs(s-a)<=1);return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 px-4 py-3",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Menampilkan ",k," - ",u," dari ",d," booking"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(Math.max(1,a-1)),disabled:a===1,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Prev"}),y.map((s,c,m)=>e.jsxs("span",{children:[c>0&&m[c-1]!==s-1&&e.jsx("span",{className:"px-2 text-slate-400",children:"..."}),e.jsx("button",{onClick:()=>l(s),className:`cursor-pointer rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${a===s?"bg-primary text-white":"border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:s})]},s)),e.jsx("button",{onClick:()=>l(Math.min(i,a+1)),disabled:a===i,className:"cursor-pointer rounded-lg border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",children:"Next"})]})]})}function V({bookings:a,doctors:i}){const[d,x]=r.useState(""),[l,k]=r.useState(""),[u,y]=r.useState(""),[s,c]=r.useState(""),[m,h]=r.useState(1),[o,C]=r.useState(10),[p,F]=r.useState(""),[g,v]=r.useState("asc"),{filterBookings:S}=A(a),N=r.useMemo(()=>S(d,l,u,s),[S,d,l,u,s]),f=r.useMemo(()=>p?[...N].sort((t,n)=>{let b,j;switch(p){case"patient_name":b=t.patient_name.toLowerCase(),j=n.patient_name.toLowerCase();break;case"booking_date":b=new Date(t.booking_date).getTime(),j=new Date(n.booking_date).getTime();break;case"created_at":b=new Date(t.created_at).getTime(),j=new Date(n.created_at).getTime();break;default:return 0}return b<j?g==="asc"?-1:1:b>j?g==="asc"?1:-1:0}):N,[N,p,g]),B=o===0?f:f.slice((m-1)*o,m*o),_=o===0?1:Math.ceil(f.length/o),w=(t,n)=>{h(1),t==="search"?x(n):t==="status"?k(n):t==="date"?y(n):t==="doctor"&&c(n)};console.log(B);const D=()=>{x(""),k(""),y(""),c(""),h(1)},M=t=>{C(t),h(1)},T=t=>{p===t?v(g==="asc"?"desc":"asc"):(F(t),v("asc")),h(1)};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Daftar Booking"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Kelola semua data booking pasien"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"rounded-full bg-primary/10 px-4 py-1.5 text-sm font-medium text-primary",children:["Total: ",N.length," booking"]}),e.jsxs(L,{href:"/admin/bookings/create",className:"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-primary-dark",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"add"}),"Buat Booking"]})]})]}),e.jsx(I,{searchQuery:d,statusFilter:l,dateFilter:u,doctorFilter:s,doctors:i,onSearchChange:t=>w("search",t),onStatusChange:t=>w("status",t),onDateChange:t=>w("date",t),onDoctorChange:t=>w("doctor",t),onClearFilters:D}),e.jsx(E,{bookings:B,showExpandable:!0,showActions:!0,currentPage:m,itemsPerPage:o===0?f.length:o,emptyMessage:"Tidak ada booking ditemukan",sortField:p,sortOrder:g,onSort:T}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Tampilkan:"}),e.jsxs("select",{value:o,onChange:t=>M(Number(t.target.value)),className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:0,children:"Semua"})]}),e.jsx("span",{className:"text-sm text-slate-500",children:"data"})]}),o!==0&&e.jsx(Q,{currentPage:m,totalPages:_,totalItems:f.length,itemsPerPage:o,onPageChange:h})]})]})}V.layout=a=>e.jsx(O,{children:a});export{V as default};
